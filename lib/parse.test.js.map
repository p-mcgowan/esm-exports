{"version":3,"file":"parse.test.js","sourceRoot":"","sources":["..\\parse.test.ts"],"names":[],"mappings":"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","sourcesContent":["import test from \"ava\";\nconst pkgDir = require(\"pkg-dir\");\nconst mock = require(\"mock-require\");\nvar parse;\n\ntest.before(t => {\n    mock(\"./main\", {\n        default: function(specifier, properties) {\n            properties.__mainMock = true;\n            return [properties];\n        }\n    });\n    parse = require(\"./parse\").default;\n});\n\ntest(\"var export\", async function(t) {\n    var code = `export var aaa = 1`;\n    var [result] = await parse(code);\n    t.is(result.name, \"aaa\");\n});\n\ntest(\"several var export\", async function(t) {\n    var code = `export var aaa, bbb`;\n    var [result, result2] = await parse(code);\n    t.is(result.name, \"aaa\");\n    t.is(result2.name, \"bbb\");\n});\n\ntest(\"export all\", async function(t) {\n    var code = `export * from './provider'`;\n    var [result] = await parse(code);\n    t.is(result.specifier, \"./provider\");\n});\n\ntest(\"export some from module\", async function(t) {\n    var code = `export {var1} from './provider'`;\n    var [result] = await parse(code);\n    t.is(result.name, \"var1\");\n    t.is(result.specifier, \"./provider\");\n});\n\ntest(\"pick export\", async function(t) { \n   var code = `export { CalendarEvent, EventAction } from 'calendar-utils'`;\n   var [first, second] = await parse(code);\n   t.is(first.name, \"CalendarEvent\");\n   t.is(first.specifier, \"calendar-utils\");\n   t.falsy(first.exportAll);\n   t.is(second.name, \"EventAction\");\n});\n\ntest(\"export declare class\", async function(t) {\n    var code = `export declare class Calendar`;\n    var [result] = await parse(code);\n    t.is(result.name, \"Calendar\");\n});\n\ntest(\"export class\", async function(t) {\n    var code = `export class Aaa`;\n    var [result] = await parse(code);\n    t.is(result.name, \"Aaa\");\n});\n\ntest(\"export interface\", async function(t) {\n    var code = `export interface Entry {}`;\n    var [result] = await parse(code);\n    t.is(result.name, \"Entry\");\n});\n\ntest(\"export function\", async function(t) {\n    var code = `export function dummy() {}`;\n    var [result] = await parse(code);\n    t.is(result.name, \"dummy\");\n});\n\ntest(\"export somevar\", async function(t) {\n    var code = `export {somevar, otherVar}`;\n    var [result, other] = await parse(code);\n    t.is(result.name, \"somevar\");\n    t.falsy(result.exportAll);\n    t.is(other.name, \"otherVar\");\n    t.falsy(other.exportAll);\n});\n\n"]}